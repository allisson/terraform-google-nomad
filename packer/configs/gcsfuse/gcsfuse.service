[Unit]
Description="GCSFUSE - Mount Google Cloud Storage Bucket on VM Filesystem"
Documentation=https://cloud.google.com/storage/docs/gcs-fuse
Requires=network-online.target
After=network-online.target

[Service]
Type=oneshot
User=root
Group=root
EnvironmentFile=/etc/gcsfuse.env
ExecStart=/usr/bin/gcsfuse --local-file-cache $GCSFUSE_BUCKET /gcs
RemainAfterExit=true
KillMode=process
LimitNOFILE=65536

[Install]
WantedBy=default.target